<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newthread.framework.mapper.TeamnewsMapper">
    <resultMap id="BaseResultMap" type="com.newthread.entity.Teamnews">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <constructor>
            <idArg column="news_sid" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="news_title" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="news_picture" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="news_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="news_author" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="news_readers" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="news_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
            <arg column="news_timesstamp" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="news_contend" javaType="java.lang.String" jdbcType="LONGVARCHAR"/>
            <arg column="news_note" javaType="java.lang.String" jdbcType="LONGVARCHAR"/>
        </constructor>
    </resultMap>

    <resultMap id="BaseResultMapImg" type="com.newthread.model.NewsModelWithImages">
        <id property="newsSid" column="news_sid"/>
        <result property="newsTitle" column="news_title"/>
        <result property="newsType" column="news_type"/>
        <result property="newsAuthor" column="news_author"/>
        <result property="newsReaders" column="news_readers"/>
        <result property="newsTime" column="news_time"/>
        <result property="newsTimesstamp" column="news_timesstamp"/>
        <result property="newsContend" column="news_contend"/>
        <result property="newsNote" column="news_contendnote"/>
        <collection property="newsPicture" ofType="java.lang.String">
            <result property="newsPicture" column="img_path"/>
        </collection>
    </resultMap>


    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from teamnews
        where news_sid = #{newsSid,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.newthread.entity.Teamnews">
    insert into teamnews (news_sid, news_title, news_picture, news_type,
      news_author, news_readers, news_time, 
      news_timesstamp, news_contend, news_note
      )
    values (#{newsSid,jdbcType=INTEGER},#{newsTitle,jdbcType=VARCHAR}, #{newsPicture,jdbcType=VARCHAR}, #{newsType,jdbcType=VARCHAR},
      #{newsAuthor,jdbcType=VARCHAR}, #{newsReaders,jdbcType=INTEGER}, #{newsTime,jdbcType=TIMESTAMP}, 
      #{newsTimesstamp,jdbcType=INTEGER}, #{newsContend,jdbcType=LONGVARCHAR}, #{newsNote,jdbcType=LONGVARCHAR}
      )
  </insert>
    <update id="updateByPrimaryKey" parameterType="com.newthread.entity.Teamnews">
    update teamnews
    set
      news_title = #{newsTitle,jdbcType=VARCHAR},
      news_picture = #{newsPicture,jdbcType=VARCHAR},
      news_type = #{newsType,jdbcType=VARCHAR},
      news_author = #{newsAuthor,jdbcType=VARCHAR},
      news_readers = #{newsReaders,jdbcType=INTEGER},
      news_time = #{newsTime,jdbcType=TIMESTAMP},
      news_timesstamp = #{newsTimesstamp,jdbcType=INTEGER},
      news_contend = #{newsContend,jdbcType=LONGVARCHAR},
      news_note = #{newsNote,jdbcType=LONGVARCHAR}
    where news_sid = #{newsSid,jdbcType=INTEGER}
  </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select news_sid,news_title,news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
    news_contend, news_note
    from teamnews
    where news_sid = #{newsSid,jdbcType=INTEGER}
  </select>
    <select id="selectAll" resultMap="BaseResultMap">
    select news_sid, news_title, news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
    news_contend, news_note
    from teamnews ORDER news_sid DESC
  </select>

    <select id="select" resultMap="BaseResultMap">
    select news_sid, news_title, news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
    news_contend, news_note
    from teamnews ORDER BY news_sid DESC LIMIT #{0},#{1}
  </select>

    <select id="selectByPrimaryKeyWithImages" resultMap="BaseResultMapImg">
select news_sid, news_title, news_type, news_author, news_readers, news_time, news_timesstamp,
        news_contend, news_note,img_path
        from teamnews t  INNER JOIN images i ON  t.news_sid = i.img_note AND news_sid=#{0};
    </select>

    <select id="getRecord" resultType="java.lang.Integer">
    select count(news_sid) from teamnews;
  </select>

    <select id="selectOneNewestNews" resultMap="BaseResultMap">
select news_sid, news_title, news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
  news_contend, news_note
from teamnews ORDER BY news_sid DESC LIMIT 1;
    </select>
    <select id="getNewsByDescOrderNumber" resultMap="BaseResultMap" parameterType="java.lang.Integer">
select news_sid, news_title, news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
  news_contend, news_note
from teamnews ORDER BY news_sid DESC LIMIT #{0},1;
    </select>
    <delete id="deleteNewBySid">
        DELETE  FROM teamnews WHERE news_sid=#{0};
    </delete>
    <update id="updateNew">
        update teamnews SET
        news_title=#{1}, news_picture=#{2}, news_type=#{3}, news_author=#{4}, news_readers=#{5}, news_time=#{6}, news_timesstamp=#{7},news_contend=#{8}, news_note=#{9}
        where news_sid=#{0};
    </update>
    <insert id="addNew">
        INSERT INTO teamnews(news_title, news_picture, news_type, news_author, news_readers, news_time, news_timesstamp,
        news_contend, news_note)
        VALUES (#{0},#{1},#{2},#{3},#{4},#{5},#{6},#{7},#{8});
    </insert>
</mapper>